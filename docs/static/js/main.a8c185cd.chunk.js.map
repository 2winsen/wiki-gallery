{"version":3,"sources":["components/Gallery/FullSizeItem/FullSizeItem.module.css","components/SearchForm/SearchForm.module.css","pages/SearchResult/SearchResult.module.css","components/ErrorState/ErrorState.module.css","components/TextInput/TextInput.module.css","components/EmptyState/EmptyState.module.css","components/LoadingState/LoadingState.module.css","components/Gallery/Gallery.module.css","pages/Search/Search.module.css","components/Layout/Layout.module.css","components/Spinner/Spinner.module.css","components/ScrollTop/ScrollTop.module.css","components/Gallery/GalleryItem/GalleryItem.module.css","types/dto/WikipediaDataDTO.ts","utils/useWikipediaQuery.ts","utils/utils.ts","components/Icon/Icon.tsx","components/EmptyState/EmptyState.tsx","components/ErrorState/ErrorState.tsx","components/Spinner/Spinner.tsx","components/LoadingState/LoadingState.tsx","components/ScrollTop/ScrollTop.tsx","components/Gallery/FullSizeItem/FullSizeItem.tsx","utils/useArrowKeys.ts","components/Gallery/GalleryItem/GalleryItem.tsx","components/Gallery/Gallery.tsx","utils/useOnWindowResize.ts","components/TextInput/TextInput.tsx","components/SearchForm/SearchForm.tsx","pages/SearchResult/SearchResult.tsx","pages/Search/Search.tsx","components/Layout/Layout.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","validQueryPageItemDTO","pageDTO","original","height","width","replaceOriginalWithThumbnail","thumbnail","toPO","dto","dataIndex","toImage","source","pages","query","Object","values","filter","map","index","continuePage","continue","gimcontinue","createWikipediaQueryUrl","searchCriteria","params","URLSearchParams","append","process","toString","useWikipediaQuery","criteria","useSWRInfinite","pageIndex","previousPageData","previous","getKey","url","fetch","headers","then","res","json","data","error","size","setSize","wikipediaDataItems","undefined","isLoading","isError","joinStyles","styles","s","Boolean","join","IconSearch","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","IconDocumentSearch","IconXCircle","IconShare","IconArrowCircleLeft","IconArrowCircleRight","IconArrowUp","IconX","EmptyState","className","container","content","ErrorState","heading","Spinner","ldsRing","LoadingState","active","overlay","isScrolledPastThreshold","document","documentElement","scrollTop","ScrollTop","useState","visible","setVisible","useEffect","onScroll","addEventListener","removeEventListener","button","onClick","window","scrollTo","top","behavior","FullSizeItem","page","onNext","onPrevious","loaded","setLoaded","el","getElementsByTagName","classList","add","remove","options","swipeHandlers","useSwipeable","onSwipedLeft","onSwipedRight","onRight","onLeft","handleKeyDown","e","key","loadingState","actionPanel","href","target","rel","navigation","navigationLeft","stopPropagation","src","alt","onLoad","navigationRight","GalleryItem","hasVerticalScrollbar","htmlElement","scrollHeight","clientHeight","Gallery","onResize","deps","useParams","dataLength","reduce","acc","curr","length","getDataLength","hasMore","last","hasMoreData","fullSize","setFullSize","fetchMoreData","pendingDataIndex","useRef","handleGalleryItemClick","handleResize","current","next","loader","loadingContainer","p","currentPage","nextDataIndex","nextPage","previousDataIndex","pagesLength","previousPage","TextInput","props","inputElement","type","placeholder","onChange","value","clearButton","onClear","SearchForm","setCriteria","history","useHistory","searchForm","onSubmit","event","preventDefault","push","encodeURI","search","submit","SearchResult","appName","header","to","headerFormContainer","Search","formContainer","Layout","children","main","footer","App","console","log","version","basename","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.a8c185cd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FullSizeItem_container__3_cco\",\"loadingState\":\"FullSizeItem_loadingState__1rDBl\",\"actionPanel\":\"FullSizeItem_actionPanel__26VGN\",\"navigation\":\"FullSizeItem_navigation__1Fqnb\",\"navigationRight\":\"FullSizeItem_navigationRight__PdGfG\",\"navigationLeft\":\"FullSizeItem_navigationLeft__30yRu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchForm\":\"SearchForm_searchForm__1Sukc\",\"small\":\"SearchForm_small__1HiDW\",\"search\":\"SearchForm_search__3eDcT\",\"submit\":\"SearchForm_submit__1lmRW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"SearchResult_container__XkXpr\",\"header\":\"SearchResult_header__2eOA6\",\"heading\":\"SearchResult_heading__2DuG5\",\"headerFormContainer\":\"SearchResult_headerFormContainer__3BImz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ErrorState_container__2m8e3\",\"content\":\"ErrorState_content__m3WMq\",\"heading\":\"ErrorState_heading__3Tzyx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TextInput_container__D3fXs\",\"inputElement\":\"TextInput_inputElement__39j2j\",\"clearButton\":\"TextInput_clearButton__1tCTF\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"EmptyState_container__15mWS\",\"content\":\"EmptyState_content__2VeN-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"LoadingState_container__xQncP\",\"overlay\":\"LoadingState_overlay__1UhqG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Gallery_container__1tPm3\",\"loadingContainer\":\"Gallery_loadingContainer__3Ol3_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Search_container__3pj-3\",\"formContainer\":\"Search_formContainer__1qMBA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Layout_main__1EmZQ\",\"footer\":\"Layout_footer__2_jue\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ldsRing\":\"Spinner_ldsRing__x6VZB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ScrollTop_button__2alaZ\",\"fadeIn\":\"ScrollTop_fadeIn__2Nv57\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"GalleryItem_container__eLCcY\"};","import { WikipediaData, Page } from '../WikipediaData';\r\n\r\ninterface ImageDTO {\r\n  source: string;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ninterface QueryPageMapDTO {\r\n  [key: string]: {\r\n    thumbnail: ImageDTO;\r\n    original: ImageDTO;\r\n  }\r\n}\r\n\r\ninterface QueryPageDTO {\r\n  thumbnail: ImageDTO;\r\n  original: ImageDTO;\r\n}\r\n\r\nexport interface WikipediaDataDTO {\r\n  batchcomplete: string;\r\n  continue?: {\r\n    gimcontinue: string;\r\n    continue: string;\r\n  },\r\n  query?: {\r\n    pages: QueryPageMapDTO;\r\n  };\r\n}\r\n\r\n/**\r\n * Some images are actually not real images like ogg audio files we need to filter them\r\n * @param pageDTO \r\n */\r\nfunction validQueryPageItemDTO(pageDTO: QueryPageDTO) {\r\n  return pageDTO.original.height && pageDTO.original.width;\r\n}\r\n\r\n/**\r\n * For some images originals are smaller than thumbnails and we need to replace\r\n * @param pageDTO \r\n */\r\nfunction replaceOriginalWithThumbnail(pageDTO: QueryPageDTO) {\r\n  const { thumbnail, original } = pageDTO;\r\n  if (thumbnail.width > original.width && thumbnail.height > original.height) {\r\n    return { ...pageDTO, original: thumbnail };\r\n  }\r\n  return pageDTO;\r\n}\r\n\r\nexport function toPO(dto: WikipediaDataDTO, dataIndex: number): WikipediaData {\r\n  const toImage = (dto: ImageDTO) => ({\r\n    source: dto.source,\r\n    width: dto.width,\r\n    height: dto.height,\r\n  });\r\n  let pages: Page[] = [];\r\n  if (dto.query) {\r\n    pages = Object.values<QueryPageDTO>(dto.query.pages)\r\n      .filter(validQueryPageItemDTO)\r\n      .map(replaceOriginalWithThumbnail)\r\n      .map((pageDTO, index) => ({\r\n        index,\r\n        dataIndex,\r\n        original: toImage(pageDTO.original),\r\n        thumbnail: toImage(pageDTO.thumbnail),\r\n      }));\r\n  }\r\n  return {\r\n    continuePage: dto.continue ? dto.continue.gimcontinue : '',\r\n    pages,\r\n  };\r\n}\r\n","import { useSWRInfinite } from 'swr';\r\nimport { toPO, WikipediaDataDTO } from '../types/dto/WikipediaDataDTO';\r\nimport { Optional } from '../types/Optional';\r\nimport { WikipediaData } from '../types/WikipediaData';\r\n\r\n/**\r\n * Query builder\r\n * https://en.wikipedia.org/wiki/Special:ApiSandbox#action=query&format=json&prop=pageimages&titles=bmw&generator=images&redirects=1&piprop=thumbnail%7Cname%7Coriginal&gimlimit=50\r\n * If there are more images gimcontinue value needs to be added to query param example gimcontinue=3772%7C2020_BMW_X1_sDrive18i_1.5_Front.jpg\r\n */\r\nfunction createWikipediaQueryUrl(searchCriteria: string, continuePage?: string) {\r\n  const params = new URLSearchParams();\r\n  params.append('action', 'query');\r\n  params.append('format', 'json');\r\n  params.append('prop', 'pageimages');\r\n  params.append('titles', searchCriteria);\r\n  params.append('generator', 'images');\r\n  // To automatically redirect example Bmw -> BMW\r\n  params.append('redirects', '1');\r\n  params.append('piprop', 'name|original|thumbnail');\r\n  params.append('pithumbsize', '300');\r\n  params.append('gimlimit', '20');\r\n  if (continuePage) {\r\n    params.append('gimcontinue', continuePage);\r\n  }\r\n  return `${process.env.REACT_APP_API_HOST}/w/api.php?${params.toString()}&origin=*`;\r\n}\r\n\r\nconst getKey = (criteria: string) => (pageIndex: number, previousPageData: WikipediaDataDTO | null) => {\r\n  if (pageIndex === 0) {\r\n    return createWikipediaQueryUrl(criteria);\r\n  }\r\n  if (previousPageData) {\r\n    const previous = toPO(previousPageData, 0);\r\n    if (!previous.continuePage) {\r\n      return null;\r\n    }\r\n    return createWikipediaQueryUrl(criteria, previous.continuePage);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function useWikipediaQuery(criteria: string) {\r\n  const fetcher = (url: string) => {\r\n    return fetch(url, {\r\n      headers: {\r\n        'Content-Type': 'application/json; charset=UTF-8'\r\n      }\r\n    }).then(res => res.json())\r\n  };\r\n  const { data, error, size, setSize } = useSWRInfinite<WikipediaDataDTO>(getKey(criteria), fetcher);\r\n  let wikipediaDataItems: Optional<WikipediaData[]> = undefined;\r\n  if (data) {\r\n    wikipediaDataItems = data.map(toPO);\r\n  }\r\n  return {\r\n    data: wikipediaDataItems,\r\n    isLoading: !error && !data,\r\n    isError: error,\r\n    size,\r\n    setSize,\r\n  }\r\n}","import { Page, WikipediaData } from \"../types/WikipediaData\";\r\n\r\nexport function constants() {\r\n  return {\r\n    appName: 'Wiki Gallery',\r\n  }\r\n}\r\n\r\nexport function joinStyles(...styles: any[]) {\r\n  return styles.filter(s => Boolean(s)).join(' ');\r\n}\r\n\r\nexport function nextPage(data: WikipediaData[], currentPage: Page): Page | undefined {\r\n  let page = data[currentPage.dataIndex].pages[currentPage.index + 1];\r\n  if (!page) {\r\n    let nextDataIndex = currentPage.dataIndex + 1;\r\n    if (data[nextDataIndex]) {\r\n      page = data[nextDataIndex].pages[0];\r\n    }\r\n  }\r\n  return page;\r\n}\r\n\r\nexport function previousPage(data: WikipediaData[], currentPage: Page): Page | undefined {\r\n  let page = data[currentPage.dataIndex].pages[currentPage.index - 1];\r\n  if (!page) {\r\n    let previousDataIndex = currentPage.dataIndex - 1;\r\n    if (data[previousDataIndex]) {\r\n      const pagesLength = data[previousDataIndex].pages.length;\r\n      page = data[previousDataIndex].pages[pagesLength - 1];\r\n    }\r\n  }\r\n  return page;\r\n}\r\n","/**\r\n * https://heroicons.dev\r\n */\r\nimport React from 'react';\r\n\r\n\r\nexport function IconSearch() {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconDocumentSearch() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 21h7a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v11m0 5l4.879-4.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconXCircle() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconShare() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconArrowCircleLeft() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconArrowCircleRight() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconArrowUp() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 10l7-7m0 0l7 7m-7-7v18\"></path>\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function IconX() {\r\n  return (\r\n    <svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n    </svg>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { IconDocumentSearch } from '../Icon/Icon';\r\nimport styles from './EmptyState.module.css';\r\n\r\nfunction EmptyState() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.content}>\r\n        <IconDocumentSearch />\r\n        <h2>No results found</h2>\r\n        <span>Try adjusting your search criteria</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmptyState;\r\n","import React from 'react';\r\nimport { IconXCircle } from '../Icon/Icon';\r\nimport styles from './ErrorState.module.css';\r\n\r\nfunction ErrorState() {\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.content}>\r\n        <IconXCircle />\r\n        <h2 className={styles.heading}>Oops a nasty error occurred</h2>\r\n        <span>Most probably our engineers already fixed this issue... anyway try refreshing the page</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorState;\r\n","import React from 'react';\r\nimport styles from './Spinner.module.css';\r\n\r\nfunction Spinner() {\r\n  return (\r\n    <div className={styles.ldsRing}><div></div><div></div><div></div><div></div></div>\r\n  );\r\n}\r\n\r\nexport default Spinner;\r\n","import React from 'react';\r\nimport { joinStyles } from '../../utils/utils';\r\nimport Spinner from '../Spinner/Spinner';\r\nimport styles from './LoadingState.module.css';\r\n\r\ninterface Props {\r\n  active: boolean;\r\n  overlay?: boolean;\r\n  className?: string;\r\n}\r\n\r\nfunction LoadingState({ active, overlay, className }: Props) {\r\n  if (active) {\r\n    return (\r\n      <div className={joinStyles(styles.container, overlay && styles.overlay, className)}>\r\n        <Spinner />\r\n      </div>\r\n    );\r\n  }\r\n  return <></>;\r\n}\r\n\r\nexport default LoadingState;\r\n","import React, { useEffect, useState } from 'react';\r\nimport styles from './ScrollTop.module.css';\r\nimport { IconArrowUp } from '../Icon/Icon';\r\n\r\nconst TOP_THRESHOLD = 70;\r\nconst isScrolledPastThreshold = () => document.documentElement.scrollTop > TOP_THRESHOLD;\r\n\r\nfunction ScrollTop() {\r\n  const [visible, setVisible] = useState(isScrolledPastThreshold());\r\n\r\n  useEffect(() => {\r\n    const onScroll = () => setVisible(isScrolledPastThreshold());\r\n    document.addEventListener('scroll', onScroll);\r\n    return () => document.removeEventListener('scroll', onScroll);\r\n  }, []);\r\n\r\n  const scrollTopHandler = () => window.scrollTo({ top: 0, behavior: 'smooth' });\r\n\r\n  return (\r\n    <>\r\n      {visible && <button className={styles.button} onClick={scrollTopHandler}><IconArrowUp /></button>}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ScrollTop;\r\n","\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useSwipeable } from 'react-swipeable';\r\nimport { Page } from '../../../types/WikipediaData';\r\nimport { useArrowKeys } from '../../../utils/useArrowKeys';\r\nimport { joinStyles } from '../../../utils/utils';\r\nimport { IconShare, IconArrowCircleLeft, IconArrowCircleRight } from '../../Icon/Icon';\r\nimport LoadingState from '../../LoadingState/LoadingState';\r\nimport styles from './FullSizeItem.module.css';\r\n\r\ninterface Props {\r\n  page: Page;\r\n  onClick: () => void;\r\n  onNext: () => void;\r\n  onPrevious: () => void;\r\n}\r\n\r\nfunction FullSizeItem({ page, onClick, onNext, onPrevious }: Props) {\r\n  const [loaded, setLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const el = document.getElementsByTagName('body')[0];\r\n    el.classList.add('noScroll');\r\n    return () => el.classList.remove('noScroll');\r\n  }, []);\r\n\r\n  function handleNext(e: React.MouseEvent) {\r\n    e.stopPropagation();\r\n    onNext();\r\n  }\r\n\r\n  function handlePrevious(e: React.MouseEvent) {\r\n    e.stopPropagation();\r\n    onPrevious();\r\n  }\r\n\r\n  const swipeHandlers = useSwipeable({\r\n    onSwipedLeft: onNext,\r\n    onSwipedRight: onPrevious,\r\n  });\r\n\r\n  useArrowKeys({\r\n    onRight: onNext,\r\n    onLeft: onPrevious,\r\n  });\r\n\r\n  return (\r\n    <div className={styles.container} onClick={onClick}>\r\n      {!loaded && <LoadingState active className={styles.loadingState} />}\r\n      <div className={styles.actionPanel}>\r\n        <a href={page.original.source} target=\"_blank\" rel=\"noreferrer\" className=\"iconButton\"><IconShare /></a>\r\n      </div>\r\n      <span className={joinStyles(styles.navigation, 'iconButton', styles.navigationLeft)} onClick={handlePrevious}><IconArrowCircleLeft /></span>\r\n      <img src={page.original.source} alt={page.original.source} onLoad={() => setLoaded(true)} {...swipeHandlers} />\r\n      <span className={joinStyles(styles.navigation, 'iconButton', styles.navigationRight)} onClick={handleNext}><IconArrowCircleRight /></span>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FullSizeItem;","import { useEffect } from 'react';\r\n\r\ntype KeyboardEventFn = (e: KeyboardEvent) => void\r\n\r\nexport function useArrowKeys(options: Partial<{ onLeft: KeyboardEventFn, onRight: KeyboardEventFn }>) {\r\n  useEffect(() => {\r\n    function handleKeyDown(e: KeyboardEvent) {\r\n      switch (e.key) {\r\n        case 'ArrowLeft':\r\n          options.onLeft && options.onLeft(e);\r\n          break;\r\n        case 'ArrowRight':\r\n          options.onRight && options.onRight(e);\r\n          break;\r\n        default:\r\n      }\r\n    }\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  });\r\n}","import React from 'react';\r\nimport { Page } from '../../../types/WikipediaData';\r\nimport styles from './GalleryItem.module.css';\r\n\r\ninterface Props {\r\n  page: Page;\r\n  onClick: (page: Page) => void;\r\n}\r\n\r\nfunction GalleryItem({ page, onClick }: Props) {\r\n  return (\r\n    <div className={styles.container} onClick={() => onClick(page)}>\r\n      <img src={page.thumbnail.source} alt={page.thumbnail.source} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GalleryItem;","import React, { useEffect, useRef, useState } from 'react';\r\nimport InfiniteScroll from 'react-infinite-scroll-component';\r\nimport { useParams } from 'react-router-dom';\r\nimport { Optional } from '../../types/Optional';\r\nimport { Page, WikipediaData } from '../../types/WikipediaData';\r\nimport { useOnWindowResize } from '../../utils/useOnWindowResize';\r\nimport { useWikipediaQuery } from '../../utils/useWikipediaQuery';\r\nimport { nextPage, previousPage } from '../../utils/utils';\r\nimport EmptyState from '../EmptyState/EmptyState';\r\nimport ErrorState from '../ErrorState/ErrorState';\r\nimport LoadingState from '../LoadingState/LoadingState';\r\nimport ScrollTop from '../ScrollTop/ScrollTop';\r\nimport FullSizeItem from './FullSizeItem/FullSizeItem';\r\nimport styles from './Gallery.module.css';\r\nimport GalleryItem from './GalleryItem/GalleryItem';\r\n\r\nfunction getDataLength(data: Optional<WikipediaData[]>) {\r\n  if (!data) {\r\n    return 0;\r\n  }\r\n  return data.reduce((acc, curr) => acc += curr.pages.length, 0);\r\n}\r\n\r\nfunction hasMoreData(data: Optional<WikipediaData[]>) {\r\n  if (!data) {\r\n    return false;\r\n  }\r\n  const last = data[data.length - 1];\r\n  return Boolean(last.continuePage);\r\n}\r\n\r\nfunction hasVerticalScrollbar() {\r\n  const htmlElement = document.getElementsByTagName('html')[0];\r\n  return htmlElement.scrollHeight > htmlElement.clientHeight;\r\n}\r\n\r\nfunction Gallery() {\r\n  const { criteria } = useParams<{ criteria?: string }>();\r\n  const { data, isLoading, isError, size, setSize } = useWikipediaQuery(criteria || '');\r\n  const dataLength = getDataLength(data);\r\n  const hasMore = hasMoreData(data);\r\n  const [fullSize, setFullSize] = useState<Page>();\r\n  const fetchMoreData = () => setSize(size + 1);\r\n  // In case we need next full size item but it is not yet loaded\r\n  const pendingDataIndex = useRef<number>();\r\n\r\n  // In case screen size is large enough to show 20 items without scrollbar this effect fetches more automatically\r\n  useEffect(() => {\r\n    if (!hasVerticalScrollbar() && hasMore) {\r\n      fetchMoreData();\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps \r\n  }, [hasMore]);\r\n\r\n  useOnWindowResize(() => {\r\n    if (!hasVerticalScrollbar() && hasMore) {\r\n      fetchMoreData();\r\n    }\r\n  }, [hasMore])\r\n\r\n  function handleGalleryItemClick(page: Page) {\r\n    setFullSize(page);\r\n  }\r\n\r\n  function handleFullSizeItemClick() {\r\n    setFullSize(undefined);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (pendingDataIndex.current != null) {\r\n      if (data && data[pendingDataIndex.current]) {\r\n        setFullSize(data[pendingDataIndex.current].pages[0]);\r\n        pendingDataIndex.current = undefined;\r\n      }\r\n    }\r\n  }, [data]);\r\n\r\n  function handleNextItem() {\r\n    if (fullSize && data) {\r\n      const next = nextPage(data, fullSize);\r\n      if (next) {\r\n        setFullSize(next);\r\n      } else if (hasMore) {\r\n        fetchMoreData();\r\n        pendingDataIndex.current = fullSize.dataIndex + 1;\r\n      } else {\r\n        setFullSize(undefined);\r\n      }\r\n    }\r\n  }\r\n\r\n  function handlePreviousItem() {\r\n    if (fullSize && data) {\r\n      const previous = previousPage(data, fullSize);\r\n      setFullSize(previous);\r\n    }\r\n  }\r\n\r\n  let content;\r\n  if (isLoading) {\r\n    content = <LoadingState active overlay />\r\n  } else if (isError) {\r\n    content = <ErrorState />\r\n  } else if (data) {\r\n    content = <InfiniteScroll\r\n      dataLength={dataLength}\r\n      next={fetchMoreData}\r\n      hasMore={hasMore}\r\n      loader={<div className={styles.loadingContainer}><LoadingState active /></div>}\r\n    >\r\n      {data.map(d => {\r\n        if (d.pages.length) {\r\n          return d.pages.map(p => <GalleryItem key={`${p.dataIndex}-${p.index}`} page={p} onClick={handleGalleryItemClick} />)\r\n        }\r\n        return <EmptyState key=\"empty\" />;\r\n      })}\r\n    </InfiniteScroll>\r\n  }\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      {fullSize && <FullSizeItem page={fullSize} onClick={handleFullSizeItemClick} onNext={handleNextItem} onPrevious={handlePreviousItem} />}\r\n      {content}\r\n      {!fullSize && <ScrollTop />}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Gallery;","import { useEffect } from 'react';\r\n\r\nexport function useOnWindowResize(onResize: () => void, deps: any[]) {\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      onResize();\r\n    }\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, deps);\r\n}","import React from 'react';\r\nimport { joinStyles } from '../../utils/utils';\r\nimport styles from './TextInput.module.css';\r\nimport { IconX } from '../Icon/Icon';\r\n\r\ninterface Props extends React.InputHTMLAttributes<HTMLInputElement> {\r\n  onClear?: () => void;\r\n}\r\n\r\nfunction TextInput(props: Props) {\r\n  return (\r\n    <div className={styles.container}>\r\n      <input className={joinStyles(props.className, styles.inputElement)} type=\"text\" placeholder={props.placeholder} onChange={props.onChange} value={props.value} />\r\n      <span className={joinStyles(styles.clearButton, 'iconButton')} onClick={props.onClear}><IconX /></span>\r\n    </div >\r\n  )\r\n}\r\n\r\nexport default TextInput;\r\n","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { joinStyles } from '../../utils/utils';\r\nimport { IconSearch } from '../Icon/Icon';\r\nimport TextInput from '../TextInput/TextInput';\r\nimport styles from './SearchForm.module.css';\r\n\r\ninterface Props {\r\n  size: 'large' | 'small';\r\n  value?: string;\r\n}\r\n\r\nfunction SearchForm(props: Props) {\r\n  const [criteria, setCriteria] = useState(props.value || '');\r\n  const history = useHistory();\r\n\r\n  function handleSubmit(event: React.FormEvent) {\r\n    event.preventDefault();\r\n    history.push(`/result/${encodeURI(criteria)}`);\r\n  }\r\n\r\n  function handleInput(event: React.ChangeEvent<HTMLInputElement>) {\r\n    setCriteria(event.target.value);\r\n  }\r\n\r\n  return (\r\n    <form className={joinStyles(styles.searchForm, styles[props.size])} onSubmit={handleSubmit}>\r\n      <TextInput\r\n        className={styles.search}\r\n        type=\"text\"\r\n        placeholder=\"e.g. Isaac Newton\"\r\n        onChange={handleInput}\r\n        onClear={() => setCriteria('')}\r\n        value={criteria}\r\n      />\r\n      <button className={styles.submit} type=\"submit\"><IconSearch /></button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default SearchForm;\r\n","import React from 'react';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport Gallery from '../../components/Gallery/Gallery';\r\nimport SearchForm from '../../components/SearchForm/SearchForm';\r\nimport { constants } from '../../utils/utils';\r\nimport styles from './SearchResult.module.css';\r\n\r\nfunction SearchResult() {\r\n  const { criteria } = useParams<{ criteria?: string }>();\r\n  const { appName } = constants();\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <header className={styles.header}>\r\n        <div className={styles.heading}>\r\n          <Link to=\"/\"><h2>{appName}</h2></Link>\r\n        </div>\r\n        <div className={styles.headerFormContainer}>\r\n          <SearchForm size=\"small\" value={criteria} />\r\n        </div>\r\n      </header>\r\n      <main>\r\n        <Gallery />        \r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchResult;\r\n","import React from 'react';\r\nimport SearchForm from '../../components/SearchForm/SearchForm';\r\nimport { constants } from '../../utils/utils';\r\nimport styles from './Search.module.css';\r\n\r\nfunction Search() {\r\n  const { appName } = constants();\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.formContainer}>\r\n        <h1>{appName}</h1>\r\n        <SearchForm size=\"large\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Search;\r\n","import React from 'react';\r\nimport styles from './Layout.module.css';\r\n\r\ninterface Props {\r\n  children?: React.ReactNode;\r\n}\r\n\r\nfunction Layout({ children }: Props) {\r\n  return (\r\n    <>\r\n      <main className={styles.main}>{children}</main>\r\n      <footer className={styles.footer}>\r\n        This website uses material from <a href=\"https://en.wikipedia.org/w/api.php\">Wikipedia API</a>.\r\n      </footer>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Layout;\r\n","import React, { useEffect } from 'react';\r\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom';\r\nimport SearchResult from './pages/SearchResult/SearchResult';\r\nimport Search from './pages/Search/Search';\r\nimport Layout from './components/Layout/Layout';\r\nimport { version } from '../package.json';\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    console.log('app version:', version);\r\n  }, []);\r\n\r\n  return (\r\n    <Router basename=\"/wiki-gallery\">\r\n      <Layout>\r\n        <Switch>\r\n          <Route path=\"/result/:criteria?\">\r\n            <SearchResult />\r\n          </Route>\r\n          <Route path=\"/\" exact>\r\n            <Search />\r\n          </Route>\r\n          <Redirect to=\"/\" />\r\n        </Switch>\r\n      </Layout>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}